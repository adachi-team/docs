(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{320:function(s,t,a){"use strict";a.r(t);var e=a(14),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"message-工具类"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#message-工具类"}},[s._v("#")]),s._v(" message 工具类")]),s._v(" "),t("p",[s._v("尽管在 "),t("RouterLink",{attrs:{to:"/api/global/client.html"}},[s._v("client 工具类")]),s._v(" 中提供各种消息发送相关的 api。但考虑种类繁杂、响应 bot 配置项（例如 "),t("code",[s._v("atUser")]),s._v("）等方面，我们需要对发送消息方法进一步的封装。")],1),s._v(" "),t("p",[s._v("message 工具类就是用于处理这种情况，它可以自行创建发送消息方法，又或是直接向 "),t("code",[s._v("master")]),s._v(" 发送消息。")]),s._v(" "),t("p",[s._v("具体 api 调用可以翻阅 "),t("RouterLink",{attrs:{to:"/api/global/message.html"}},[s._v("工具类 Message Api")])],1),s._v(" "),t("h2",{attrs:{id:"创建发送消息方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建发送消息方法"}},[s._v("#")]),s._v(" 创建发送消息方法")]),s._v(" "),t("p",[s._v("工具类中提供了 "),t("code",[s._v("getSendMessageFunc()")]),s._v(" 方法用于创建自定义发送消息方法。")]),s._v(" "),t("p",[s._v("被创建的自定义发送消息方法支持发送任意类型消息（包括合并转发消息），并会同步响应 "),t("code",[s._v("atUser")]),s._v(" 配置项设置。")]),s._v(" "),t("p",[s._v("方法一经创建，其发送的目标就已经被固定，无法改变。仅支持传入待发送内容与与是否携带 "),t("code",[s._v("at")]),s._v(" 消息。详情可以查看 "),t("RouterLink",{attrs:{to:"/api/message.html#getSendMessageFunc"}},[s._v("消息发送方法")])],1),s._v(" "),t("h3",{attrs:{id:"指定用户的私聊"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#指定用户的私聊"}},[s._v("#")]),s._v(" 指定用户的私聊")]),s._v(" "),t("p",[s._v("示例：对 QQ 为 114514191 的用户，创建私聊发送消息方法")]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" bot "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ROOT"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" MessageType "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@/modules/message"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" sendMessageFunc "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" bot"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSendMessageFunc")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("114514191")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" MessageType"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Private "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h3",{attrs:{id:"指定群聊内的指定用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#指定群聊内的指定用户"}},[s._v("#")]),s._v(" 指定群聊内的指定用户")]),s._v(" "),t("p",[s._v("示例：对群号为 100000001 群聊内的 QQ 为 114514191 用户，创建消息发送方法：")]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" bot "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ROOT"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" MessageType "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@/modules/message"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" sendMessageFunc "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" bot"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSendMessageFunc")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("114514191")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" MessageType"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Group"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100000001")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h3",{attrs:{id:"指定群聊内-at-全体成员"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#指定群聊内-at-全体成员"}},[s._v("#")]),s._v(" 指定群聊内 at 全体成员")]),s._v(" "),t("p",[s._v("示例：对群号为 100000001 的群聊，创建全体成员消息发送方法：")]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" bot "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ROOT"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" MessageType "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@/modules/message"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" sendMessageFunc "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" bot"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSendMessageFunc")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"all"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" MessageType"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Group"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100000001")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h2",{attrs:{id:"向-bot-主人发送消息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#向-bot-主人发送消息"}},[s._v("#")]),s._v(" 向 bot 主人发送消息")]),s._v(" "),t("p",[s._v("通过 "),t("code",[s._v("sendMaster()")]),s._v(" 方法可以快捷的向 bot 主人发送私聊消息。")]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" bot "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ROOT"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nbot"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sendMaster")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"程序出错啦"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);