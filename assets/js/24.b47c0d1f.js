(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{300:function(t,s,a){"use strict";a.r(s);var e=a(14),r=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"手动部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#手动部署"}},[t._v("#")]),t._v(" 手动部署")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("如果你希望在 Windows 中部署，"),s("RouterLink",{attrs:{to:"/deploy/install/windows.html"}},[t._v("这篇文章")]),t._v("可能是更好的选择")],1)]),t._v(" "),s("h2",{attrs:{id:"前置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前置"}},[t._v("#")]),t._v(" 前置")]),t._v(" "),s("p",[t._v("首先你需要启动一个适配 OneBot v11 的实现端，例如"),s("a",{attrs:{href:"https://docs.go-cqhttp.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("go-cqhttp"),s("OutboundLink")],1),t._v("、"),s("a",{attrs:{href:"https://github.com/lc-cn/onebots",target:"_blank",rel:"noopener noreferrer"}},[t._v("lc-cn/onebots"),s("OutboundLink")],1),t._v("，更多的可在 "),s("a",{attrs:{href:"https://onebot.dev/ecosystem.html#onebot-11-10-cqhttp",target:"_blank",rel:"noopener noreferrer"}},[t._v("OneBot 生态"),s("OutboundLink")],1),t._v(" 查看。")]),t._v(" "),s("p",[t._v("在实现端中开启 "),s("strong",[t._v("正向 websocket")]),t._v("，配置 "),s("strong",[t._v("正向 websocket")]),t._v(" 服务地址。并检查是否正常启动了 "),s("code",[t._v("redis")]),t._v(" 数据库。")]),t._v(" "),s("h2",{attrs:{id:"拉取项目源码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#拉取项目源码"}},[t._v("#")]),t._v(" 拉取项目源码")]),t._v(" "),s("p",[t._v("切换到你所希望存放 bot 的目录，拉取项目源码")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://mirror.ghproxy.com/https://github.com/SilveryStar/Adachi-BOT.git\n")])])]),s("p",[t._v("进入项目根目录，安装项目依赖")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" Adachi-BOT\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])])]),s("h2",{attrs:{id:"初始化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#初始化"}},[t._v("#")]),t._v(" 初始化")]),t._v(" "),s("p",[t._v("于根目录下执行命令来启动并初始化项目")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" start\n")])])]),s("p",[t._v("在看到终端打印配置文件创建成功的提示后，项目根目录下将会生成一个 "),s("code",[t._v("config")]),t._v(" 目录，这是 "),s("code",[t._v("Adachi-BOT")]),t._v(" 的配置文件所在目录。")]),t._v(" "),s("p",[t._v("打开 "),s("code",[t._v("config/base.yml")]),t._v("，修改 "),s("code",[t._v("master")]),t._v(" 为主人 qq 号码，并根据实现端所提供的"),s("strong",[t._v("正向 websocket 服务")]),t._v("地址，按需填入 "),s("code",[t._v("wsServer")]),t._v(" 与 "),s("code",[t._v("wsApiServer")]),t._v("。")]),t._v(" "),s("p",[t._v("一般情况下，其他配置文件内容无需修改。你同样可以参考 "),s("RouterLink",{attrs:{to:"/config/base.html"}},[t._v("配置项")]),t._v(" 来酌情修改。")],1),t._v(" "),s("h2",{attrs:{id:"启动项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动项目"}},[t._v("#")]),t._v(" 启动项目")]),t._v(" "),s("p",[t._v("再次于根目录下执行启动命令")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" start\n")])])]),s("p",[t._v("一切正常的话，终端将会持续打印日志。并将在主人 qq 中收到 bot qq 发来的上线成功提醒。")]),t._v(" "),s("h2",{attrs:{id:"后台托管启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#后台托管启动"}},[t._v("#")]),t._v(" 后台托管启动")]),t._v(" "),s("p",[t._v("使用上述方式启动的项目，终端一经关闭 bot 服务则被停止。改为执行如下命令来实现后台托管启动")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" serve\n")])])]),s("p",[t._v("之后就可以安全将终端关闭，且不会影响 bot 的正常运行。\n且此种启动方式允许使用 "),s("strong",[t._v("restart(重启)")]),t._v("、"),s("strong",[t._v("upgrade(更新)")]),t._v(" 等快捷指令。")]),t._v(" "),s("p",[t._v("下面提供了几种在此模式下的帮助命令")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看终端日志")]),t._v("\npm2 log adachi-bot\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重启项目 ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" restart\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 停止项目")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" stop\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);