(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{317:function(t,s,a){"use strict";a.r(s);var n=a(14),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"command-工具类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#command-工具类"}},[t._v("#")]),t._v(" command 工具类")]),t._v(" "),s("p",[t._v("command 工具类负责对核心成员"),s("strong",[t._v("指令")]),t._v("的处理，并提供了一系列获取指令相关信息的操作方法。")]),t._v(" "),s("p",[t._v("通过翻阅 "),s("RouterLink",{attrs:{to:"/api/global/command.html"}},[t._v("工具类 Command API")]),t._v(" 来查看所有的相关方法。")],1),t._v(" "),s("h2",{attrs:{id:"获取指令实例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#获取指令实例"}},[t._v("#")]),t._v(" 获取指令实例")]),t._v(" "),s("p",[t._v("每一个指令均被创建为"),s("a",{attrs:{href:"#%E6%8C%87%E4%BB%A4%E5%AE%9E%E4%BE%8B"}},[t._v("指令实例")]),t._v("活跃于框架内，可以通过一些方法来获取它们。")]),t._v(" "),s("h3",{attrs:{id:"获取单一指令实例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#获取单一指令实例"}},[t._v("#")]),t._v(" 获取单一指令实例")]),t._v(" "),s("p",[t._v("通过 "),s("code",[t._v("getSingle")]),t._v(" 方法，根据每个指令独一无二的 "),s("code",[t._v("key")]),t._v("，可以获取具体指令的"),s("a",{attrs:{href:"#%E6%8C%87%E4%BB%A4%E5%AE%9E%E4%BE%8B"}},[t._v("指令实例")]),t._v("。当未获取到对应指令实例时，得到的结果为 "),s("code",[t._v("undefined")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" bot "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ROOT"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" detail "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" bot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("command"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSingle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"adachi.detail"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("在获取指令实例时，还可以对指令权限、指令范围作出限制。这通常可以被用来检测指令权限是否满足要求。")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" bot "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ROOT"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" AuthLevel "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@/modules/management/auth"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" MessageScope "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@/modules/message"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" detail "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" bot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("command"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSingle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"adachi.detail"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" AuthLevel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("User"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" MessageScope"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Both "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("上面示例获取了 "),s("code",[t._v("key")]),t._v(" 值为 "),s("code",[t._v("adachi.detail")]),t._v(" 的指令，且限制权限为 "),s("code",[t._v("user")]),t._v(" 以上（包括 "),s("code",[t._v("user")]),t._v("），并且在私聊、群聊中均可用。实际上这两者本身也是作为默认值而传递的。")]),t._v(" "),s("h3",{attrs:{id:"获取一组指令实例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#获取一组指令实例"}},[t._v("#")]),t._v(" 获取一组指令实例")]),t._v(" "),s("p",[t._v("通过 "),s("code",[t._v("get")]),t._v(" 方法，可以获取符合要求的一组指令实例。")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" bot "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ROOT"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" AuthLevel "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@/modules/management/auth"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" MessageScope "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@/modules/message"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" detail "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" bot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("command"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSingle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" AuthLevel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("User"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" MessageScope"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Both "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("上面示例获取了满足权限为 "),s("code",[t._v("user")]),t._v(" 以上（包括 "),s("code",[t._v("user")]),t._v("），并且在私聊、群聊中均可用的所有指令的集合。")]),t._v(" "),s("h2",{attrs:{id:"指令实例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#指令实例"}},[t._v("#")]),t._v(" 指令实例")]),t._v(" "),s("p",[t._v("在 "),s("code",[t._v("Adachi-BOT")]),t._v(" 中，每一个插件提供的指令均被实例化为一个指令实例。实例包含了指令自身的相关信息，与一些便利的操作方法。")]),t._v(" "),s("p",[t._v("详情可以查看 "),s("RouterLink",{attrs:{to:"/api/command.html#指令实例"}},[t._v("工具类 Command API - 指令实例")]),t._v("，这里仅列举部分内容。")],1),t._v(" "),s("h3",{attrs:{id:"获取实例信息属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#获取实例信息属性"}},[t._v("#")]),t._v(" 获取实例信息属性")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" bot "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ROOT"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" detail "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" bot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("command"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSingle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"adachi.detail"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndetail"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),t._v("cmdKey"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndetail"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),t._v("auth"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndetail"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),t._v("desc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"使用实例匹配指定内容"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用实例匹配指定内容"}},[t._v("#")]),t._v(" 使用实例匹配指定内容")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" bot "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ROOT"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" detail "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" bot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("command"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSingle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"adachi.detail"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndetail"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("match")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#detail 1"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);