(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{342:function(t,s,a){"use strict";a.r(s);var n=a(14),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"file-工具类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#file-工具类"}},[t._v("#")]),t._v(" file 工具类")]),t._v(" "),s("p",[s("code",[t._v("Adachi-BOT")]),t._v(" 简单的封装了一些常用方法用于操作文件与路径，内置于 "),s("code",[t._v("file")]),t._v(" 工具类中。")]),t._v(" "),s("p",[t._v("可以通过翻阅 "),s("RouterLink",{attrs:{to:"/api/global/file.html"}},[t._v("工具类 File API")]),t._v(" 来查看工具类所包含的所有方法。")],1),t._v(" "),s("h2",{attrs:{id:"基本路径"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本路径"}},[t._v("#")]),t._v(" 基本路径")]),t._v(" "),s("p",[t._v("基本所有 "),s("code",[t._v("file")]),t._v(" 工具类的方法均存在一个可选的 "),s("code",[t._v("place")]),t._v(" 基本路径参数，路径将以该参数作为基地址获取。")]),t._v(" "),s("p",[t._v("在工具类中内置了三个基本路径：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("root")]),t._v(" 项目根目录 "),s("code",[t._v("/")])]),t._v(" "),s("li",[s("code",[t._v("config")]),t._v(" 配置文件目录 "),s("code",[t._v("/config")])]),t._v(" "),s("li",[s("code",[t._v("plugin")]),t._v(" 插件目录 "),s("code",[t._v("/src/plugins")])])]),t._v(" "),s("h2",{attrs:{id:"同步方法与异步方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#同步方法与异步方法"}},[t._v("#")]),t._v(" 同步方法与异步方法")]),t._v(" "),s("p",[t._v("基本所有方法均存在"),s("strong",[t._v("同步")]),t._v("和"),s("strong",[t._v("异步")]),t._v("两种类型。同步方法在命名上比异步方法多了一个 "),s("code",[t._v("sync")]),t._v("，例如 "),s("code",[t._v("isExist")]),t._v(" 与 "),s("code",[t._v("isExistSync")]),t._v("。")]),t._v(" "),s("p",[t._v("其中异步方法均为返回 "),s("code",[t._v("Promise")]),t._v(" 类型的方法。")]),t._v(" "),s("p",[t._v("而同步方法在执行时，会阻塞整个程序。因此建议执行较大内存开销的操作，尽可能使用异步方法。")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" bot "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ROOT"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 同步")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" bot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("file"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadYAMLSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"adachi.yml"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"config"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 异步")]),t._v("\nbot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("file"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadYAML")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"adachi"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"config"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"获取工具类示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#获取工具类示例"}},[t._v("#")]),t._v(" 获取工具类示例")]),t._v(" "),s("p",[t._v("本工具类并不依赖任何其他工具类，因此它是可以单独使用的。")]),t._v(" "),s("p",[t._v("当开发者无法保证代码执行时 "),s("code",[t._v("bot")]),t._v(" 全局工具类能否加载完毕时，可以选择直接获取 "),s("code",[t._v("file")]),t._v(" 实例使用。")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" FileManagement "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@/modules/file"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取 file 工具类实例")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fileInstance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" FileManagement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInstance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nfileInstance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadYAMLSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"adachi"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);