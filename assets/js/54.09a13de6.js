(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{337:function(t,s,a){"use strict";a.r(s);var n=a(14),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"全局工具类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#全局工具类"}},[t._v("#")]),t._v(" 全局工具类")]),t._v(" "),s("p",[t._v("在框架中我们提供了一个全局工具类，它被定义为:")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("BOT")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("readonly")]),t._v(" redis"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Database"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("readonly")]),t._v(" config"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" BotConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("readonly")]),t._v(" client"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Client"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("readonly")]),t._v(" logger"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Logger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("readonly")]),t._v(" interval"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Interval"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("readonly")]),t._v(" file"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" FileManagement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("readonly")]),t._v(" auth"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Authorization"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("readonly")]),t._v(" message"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("default"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("readonly")]),t._v(" mail"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" MailManagement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("readonly")]),t._v(" command"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Command"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("readonly")]),t._v(" renderer"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" BasicRenderer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("这个接口实例整体会被传入"),s("strong",[t._v("插件生命周期钩子函数")]),t._v("与"),s("strong",[t._v("指令入口函数")]),t._v("，你可以通过 "),s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#%E8%A7%A3%E6%9E%84%E5%AF%B9%E8%B1%A1",target:"_blank",rel:"noopener noreferrer"}},[t._v("解构对象"),s("OutboundLink")],1),t._v(" 的方式来获取其中的某个工具，以便进行声明插件的准备工作，如创建配置文件等。")]),t._v(" "),s("h2",{attrs:{id:"使用工具类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用工具类"}},[t._v("#")]),t._v(" 使用工具类")]),t._v(" "),s("p",[t._v("下面以 "),s("code",[t._v("logger")]),t._v(" 工具类为例：")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    cfgList"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...（其他指令配置）")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" logger "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            logger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"我在指令入口函数中打印了一行日志"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...（其他插件配置）")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mounted")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" logger "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        logger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"我在插件生命周期钩子函数中打印了一行日志"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("在代码的其他地方，你也可以通过下面的代码导入所有工具类：")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" bot "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ROOT"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("请务必注意代码的执行顺序，避免在工具类创建完毕之前使用 "),s("code",[t._v("bot")]),t._v(" 中提供的工具类。如果你无法确定代码执行的时机，那么将其放在 "),s("code",[t._v("mounted")]),t._v(" 钩子函数中执行是最好的选择。")])]),t._v(" "),s("h2",{attrs:{id:"工具类列表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#工具类列表"}},[t._v("#")]),t._v(" 工具类列表")]),t._v(" "),s("ul",{staticClass:"tool-list"},[s("li",{staticClass:"tool-item"},[s("h3",[t._v("redis")]),t._v(" "),s("p",[t._v("简单封装了一些操作 bot 数据库的方法")]),t._v(" "),s("a",{attrs:{href:"./redis.html"}},[t._v("详情 →")])]),t._v(" "),s("li",{staticClass:"tool-item"},[s("h3",[t._v("config")]),t._v(" "),s("p",[t._v("用于获取 bot 配置文件内容")]),t._v(" "),s("a",{attrs:{href:"./config.html"}},[t._v("详情 →")])]),t._v(" "),s("li",{staticClass:"tool-item"},[s("h3",[t._v("client")]),t._v(" "),s("p",[t._v("用于获取 bot 配置文件内容，或是生成插件的配置文件")]),t._v(" "),s("a",{attrs:{href:"./client.html"}},[t._v("详情 →")])]),t._v(" "),s("li",{staticClass:"tool-item"},[s("h3",[t._v("logger")]),t._v(" "),s("p",[t._v("bot 所使用的日志打印工具，本质为经过预设处理的 log4js 对象")]),t._v(" "),s("a",{attrs:{href:"https://github.com/log4js-node/log4js-node",target:"_blank"}},[t._v("详情 ↗")])]),t._v(" "),s("li",{staticClass:"tool-item"},[s("h3",[t._v("interval")]),t._v(" "),s("p",[t._v("负责操作 bot 指令响应的时间间隔")]),t._v(" "),s("a",{attrs:{href:"./interval.html"}},[t._v("详情 →")])]),t._v(" "),s("li",{staticClass:"tool-item"},[s("h3",[t._v("file")]),t._v(" "),s("p",[t._v("简单封装了一些对本文文件进行操作的工具方法")]),t._v(" "),s("a",{attrs:{href:"./file.html"}},[t._v("详情 →")])]),t._v(" "),s("li",{staticClass:"tool-item"},[s("h3",[t._v("auth")]),t._v(" "),s("p",[t._v("操作用户权限的工具类")]),t._v(" "),s("a",{attrs:{href:"./auth.html"}},[t._v("详情 →")])]),t._v(" "),s("li",{staticClass:"tool-item"},[s("h3",[t._v("message")]),t._v(" "),s("p",[t._v("负责 bot 主动发送消息的工具类")]),t._v(" "),s("a",{attrs:{href:"./message.html"}},[t._v("详情 →")])]),t._v(" "),s("li",{staticClass:"tool-item"},[s("h3",[t._v("mail")]),t._v(" "),s("p",[t._v("负责 bot 主动发送邮件的工具类")]),t._v(" "),s("a",{attrs:{href:"./mail.html"}},[t._v("详情 →")])]),t._v(" "),s("li",{staticClass:"tool-item"},[s("h3",[t._v("command")]),t._v(" "),s("p",[t._v("用于操作 bot 指令系统，或获取指令相关信息")]),t._v(" "),s("a",{attrs:{href:"./command.html"}},[t._v("详情 →")])]),t._v(" "),s("li",{staticClass:"tool-item"},[s("h3",[t._v("renderer")]),t._v(" "),s("p",[t._v("控制 bot 的自定义图片渲染器")]),t._v(" "),s("a",{attrs:{href:"./renderer.html"}},[t._v("详情 →")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);