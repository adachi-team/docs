(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{314:function(t,s,a){"use strict";a.r(s);var e=a(14),r=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"工具类-renderer-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#工具类-renderer-api"}},[t._v("#")]),t._v(" 工具类 Renderer Api")]),t._v(" "),s("h2",{attrs:{id:"基本类型定义"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本类型定义"}},[t._v("#")]),t._v(" 基本类型定义")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RenderSuccess")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    code"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ok"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Sendable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RenderError")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    code"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    error"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PageFunction")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" page"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" puppeteer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Page "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Buffer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RenderResult")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" RenderSuccess "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" RenderError"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"工具类相关"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#工具类相关"}},[t._v("#")]),t._v(" 工具类相关")]),t._v(" "),s("h3",{attrs:{id:"register"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#register"}},[t._v("#")]),t._v(" register()")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RenderMethods")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" route"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" defaultSelector"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Renderer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[s("code",[t._v("route")]),t._v(" 渲染实例基地址")]),t._v(" "),s("li",[s("code",[t._v("defaultSelector")]),t._v(" 渲染实例默认目标 css 选择器")]),t._v(" "),s("li",[t._v("返回值: "),s("a",{attrs:{href:"#%E6%B8%B2%E6%9F%93%E5%AE%9E%E4%BE%8B"}},[t._v("渲染实例")])])]),t._v(" "),s("p",[t._v("注册获取一个"),s("a",{attrs:{href:"#%E6%B8%B2%E6%9F%93%E5%AE%9E%E4%BE%8B"}},[t._v("渲染实例")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"launchbrowser"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#launchbrowser"}},[t._v("#")]),t._v(" launchBrowser()")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RenderMethods")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("launchBrowser")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("puppeteer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Browser "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[t._v("返回值: Puppeteer 浏览器对象 "),s("a",{attrs:{href:"https://pptr.dev/api/puppeteer.browser",target:"_blank",rel:"noopener noreferrer"}},[t._v("Browser"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("启动浏览器，并返回浏览器实例对象 "),s("a",{attrs:{href:"https://pptr.dev/api/puppeteer.browser",target:"_blank",rel:"noopener noreferrer"}},[t._v("Browser"),s("OutboundLink")],1),t._v("。若浏览器已启动则直接返回浏览器实例对象。")]),t._v(" "),s("p",[t._v("当启动浏览器出错时，返回 "),s("code",[t._v("null")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"closebrowser"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#closebrowser"}},[t._v("#")]),t._v(" closeBrowser()")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RenderMethods")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("closeBrowser")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("关闭浏览器。")]),t._v(" "),s("h3",{attrs:{id:"restartbrowser"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#restartbrowser"}},[t._v("#")]),t._v(" restartBrowser()")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RenderMethods")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("restartBrowser")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("puppeteer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Browser "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[t._v("返回值: Puppeteer 浏览器对象 "),s("a",{attrs:{href:"https://pptr.dev/api/puppeteer.browser",target:"_blank",rel:"noopener noreferrer"}},[t._v("Browser"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("重启浏览器，并返回浏览器实例对象 "),s("a",{attrs:{href:"https://pptr.dev/api/puppeteer.browser",target:"_blank",rel:"noopener noreferrer"}},[t._v("Browser"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("p",[t._v("当启动浏览器出错时，返回 "),s("code",[t._v("null")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"refresh"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#refresh"}},[t._v("#")]),t._v(" refresh()")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RenderMethods")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("refresh")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[t._v("返回值: 刷新成功后的输出语句")])]),t._v(" "),s("p",[t._v("重启浏览器，配合 "),s("code",[t._v("#refresh")]),t._v(" 指令使用。开发者无需也不应该手动调用此方法。")]),t._v(" "),s("h3",{attrs:{id:"screenshot"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#screenshot"}},[t._v("#")]),t._v(" screenshot()")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RenderMethods")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("screenshot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" url"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" viewPort"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" puppeteer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Viewport "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" selector"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[s("code",[t._v("url")]),t._v(" 目标网页 url")]),t._v(" "),s("li",[s("code",[t._v("viewPort")]),t._v(" 页面视口配置")]),t._v(" "),s("li",[s("code",[t._v("selector")]),t._v(" 截图目标的 css 选择器")]),t._v(" "),s("li",[t._v("返回值: 截取图片的 base64 格式内容")])]),t._v(" "),s("p",[t._v("打开指定的 url，对指定的元素截图，返回截取图片的 base64 格式内容。")]),t._v(" "),s("p",[t._v("通常情况下不建议使用此方法，开发者应当使用 "),s("a",{attrs:{href:"#asbase64"}},[t._v("asBase64()")]),t._v(" 来截图并获取 base64 内容。")]),t._v(" "),s("h3",{attrs:{id:"screenshotforfunction"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#screenshotforfunction"}},[t._v("#")]),t._v(" screenshotForFunction()")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RenderMethods")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("screenshotForFunction")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" url"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" viewPort"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" puppeteer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Viewport "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pageFunction"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" PageFunction "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[s("code",[t._v("url")]),t._v(" 目标网页 url")]),t._v(" "),s("li",[s("code",[t._v("viewPort")]),t._v(" 页面视口配置")]),t._v(" "),s("li",[s("code",[t._v("selector")]),t._v(" 截图目标的 css 选择器")]),t._v(" "),s("li",[t._v("返回值: 截取图片的 base64 格式内容")])]),t._v(" "),s("p",[t._v("打开指定的 url，执行自定义的执行方法 "),s("code",[t._v("pageFunction")]),t._v("，将 "),s("code",[t._v("pageFunction")]),t._v(" 方法的返回值原路返回。\n若 "),s("code",[t._v("pageFunction")]),t._v(" 未返回任何内容，则返回空字符串 "),s("code",[t._v('""')]),t._v("。")]),t._v(" "),s("p",[t._v("通常情况下不建议使用此方法，开发者应当使用 "),s("a",{attrs:{href:"#asforfunction"}},[t._v("asForFunction()")]),t._v(" 来进行自定义获取页面内容。")]),t._v(" "),s("h2",{attrs:{id:"渲染实例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#渲染实例"}},[t._v("#")]),t._v(" 渲染实例")]),t._v(" "),s("p",[t._v("用于捕获页面内容，并输出为图片。内置基路由 "),s("code",[t._v("route")]),t._v(" 与默认选择器 "),s("code",[t._v("defaultSelector")]),t._v("。")]),t._v(" "),s("p",[t._v("基路由将与 "),s("code",[t._v("config.base.renderPort")]),t._v(" 以如下格式组成基地址。")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" baseHttp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("http://localhost:")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v(" bot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("base"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("renderPort "),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("route "),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("渲染实例所包含的方法均有 "),s("code",[t._v("route")]),t._v(" 也就是目标网页的 url 参数，当此参数为"),s("strong",[t._v("相对路径")]),t._v("时，将基于基地址 "),s("code",[t._v("baseHttp")]),t._v(" 进行拼接。反之为诸如 "),s("code",[t._v("http://xxx.com")]),t._v(" 的完整 url 时，基地址 "),s("code",[t._v("baseHttp")]),t._v(" 无效。")]),t._v(" "),s("h3",{attrs:{id:"asbase64"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#asbase64"}},[t._v("#")]),t._v(" asBase64()")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ScreenshotRendererMethods")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("asBase64")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" route"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" params"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Record"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" viewPort"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" puppeteer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Viewport "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" selector"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("RenderResult"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[s("code",[t._v("route")]),t._v(" 目标网页路径，可为相对路径或完整 url")]),t._v(" "),s("li",[s("code",[t._v("params")]),t._v(" 可选，将会解析为 html 参数字符串后拼接到最终网页路径后")]),t._v(" "),s("li",[s("code",[t._v("viewPort")]),t._v(" 可选，页面视口配置")]),t._v(" "),s("li",[s("code",[t._v("selector")]),t._v(" 可选，截图目标的 css 选择器，用于覆盖渲染实例的 "),s("code",[t._v("defaultSelector")])]),t._v(" "),s("li",[t._v("返回值: 渲染结果，data 类型为 "),s("code",[t._v("string")])])]),t._v(" "),s("p",[t._v("打开指定的网页后，对选择器所指定的目标进行截图，并返回 "),s("code",[t._v("base64")]),t._v(" 格式的图片内容。")]),t._v(" "),s("h3",{attrs:{id:"assegment"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#assegment"}},[t._v("#")]),t._v(" asSegment()")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ScreenshotRendererMethods")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("asSegment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" route"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" params"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Record"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" viewPort"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" puppeteer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Viewport "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" selector"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("RenderResult"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[s("code",[t._v("route")]),t._v(" 目标网页路径，可为相对路径或完整 url")]),t._v(" "),s("li",[s("code",[t._v("params")]),t._v(" 可选，将会解析为 html 参数字符串后拼接到最终网页路径后")]),t._v(" "),s("li",[s("code",[t._v("viewPort")]),t._v(" 可选，页面视口配置")]),t._v(" "),s("li",[s("code",[t._v("selector")]),t._v(" 可选，截图目标的 css 选择器，用于覆盖渲染实例的 "),s("code",[t._v("defaultSelector")])]),t._v(" "),s("li",[t._v("返回值: 渲染结果，data 类型为 "),s("code",[t._v("ImageElem")])])]),t._v(" "),s("p",[t._v("打开指定的网页后，对选择器所指定的目标进行截图，并返回可直接用于发送的 "),s("code",[t._v("ImageElem")]),t._v(" 格式的图片内容。")]),t._v(" "),s("h3",{attrs:{id:"asforfunction"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#asforfunction"}},[t._v("#")]),t._v(" asForFunction()")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ScreenshotRendererMethods")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("asForFunction")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" route"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pageFunction"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" PageFunction"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" viewPort"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" puppeteer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Viewport "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" params"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Record"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("RenderResult"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[s("code",[t._v("route")]),t._v(" 目标网页路径，可为相对路径或完整 url")]),t._v(" "),s("li",[s("code",[t._v("pageFunction")]),t._v(" 自定义操作方法，接受一个 page 页面对象\n"),s("ul",[s("li",[s("code",[t._v("page")]),t._v(" Puppeteer 页面对象 "),s("a",{attrs:{href:"https://pptr.dev/api/puppeteer.page/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Page"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("返回值: 自定义捕获到的内容")])])]),t._v(" "),s("li",[s("code",[t._v("viewPort")]),t._v(" 可选，页面视口配置")]),t._v(" "),s("li",[s("code",[t._v("params")]),t._v(" 可选，将会解析为 html 参数字符串后拼接到最终网页路径后")]),t._v(" "),s("li",[t._v("返回值: 渲染结果")])]),t._v(" "),s("p",[t._v("打开指定的网页后，执行自定义的执行方法 "),s("code",[t._v("pageFunction")]),t._v("，将 "),s("code",[t._v("pageFunction")]),t._v(" 方法的返回值原路返回。\n若 "),s("code",[t._v("pageFunction")]),t._v(" 未返回任何内容，则返回空字符串 "),s("code",[t._v('""')]),t._v("。")])])}),[],!1,null,null,null);s.default=r.exports}}]);