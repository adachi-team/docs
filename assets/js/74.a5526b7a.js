(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{349:function(e,t,v){"use strict";v.r(t);var _=v(14),r=Object(_.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"破坏性变更"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#破坏性变更"}},[e._v("#")]),e._v(" 破坏性变更")]),e._v(" "),t("p",[e._v("本页面列出了 v3 相比以前的所有非兼容变更。")]),e._v(" "),t("h2",{attrs:{id:"项目环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#项目环境"}},[e._v("#")]),e._v(" 项目环境")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("nodejs")]),e._v(" 所需最低版本变为 "),t("code",[e._v("16+")])]),e._v(" "),t("li",[t("RouterLink",{attrs:{to:"/migration/environment/"}},[e._v("项目包管理工具由 "),t("code",[e._v("npm")]),e._v(" 变更为 "),t("code",[e._v("pnpm")])])],1),e._v(" "),t("li",[t("RouterLink",{attrs:{to:"/migration/environment/redis.html"}},[t("code",[e._v("redis")]),e._v(" 所需最低部版本变更为 "),t("code",[e._v("v4+")])])],1)]),e._v(" "),t("h2",{attrs:{id:"核心库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#核心库"}},[e._v("#")]),e._v(" 核心库")]),e._v(" "),t("ul",[t("li",[t("RouterLink",{attrs:{to:"/migration/core/"}},[t("code",[e._v("bot.client")]),e._v(" 类进行了适配 "),t("code",[e._v("go-cqhttp")]),e._v(" 的重写")])],1),e._v(" "),t("li",[t("RouterLink",{attrs:{to:"/migration/core/config.html"}},[t("code",[e._v("config")]),e._v(" 工具类重构")])],1),e._v(" "),t("li",[t("RouterLink",{attrs:{to:"/migration/core/refresh.html"}},[t("code",[e._v("refresh")]),e._v(" 类从全局工具类中移除")])],1),e._v(" "),t("li",[t("code",[e._v("file")]),e._v(" 绝大多数方法改为异步，并同时提供了同步版本，例如 "),t("code",[e._v("loadYaml")]),e._v("（异步） 与 "),t("code",[e._v("loadYamlSync")]),e._v("（同步），建议尽可能地使用异步版本。")]),e._v(" "),t("li",[t("RouterLink",{attrs:{to:"/api/global/file.html#类型定义"}},[t("code",[e._v("file")]),e._v(" 部分方法返回值变更为 "),t("code",[e._v("FileTypeResponse")]),e._v(" 与 "),t("code",[e._v("FileStatusResponse")]),e._v(" 类型对象")])],1),e._v(" "),t("li",[t("RouterLink",{attrs:{to:"/guide/plugin/pic-render.html#常规注册方式"}},[t("code",[e._v("renderer.register")]),e._v(" 去除多余参数 "),t("code",[e._v("name")]),e._v(" 与 "),t("code",[e._v("port")])])],1),e._v(" "),t("li",[t("code",[e._v("renderer")]),e._v(" 工具类中 "),t("code",[e._v("renderer.asCqCode")]),e._v(" 方法更名为 "),t("code",[e._v("renderer.asSegment")]),e._v("，调用方式不变")]),e._v(" "),t("li",[e._v("移除 "),t("code",[e._v("whiteList")]),e._v(" 工具类，并将其合并至 "),t("code",[e._v("bot.config.whiteList")]),e._v("。")])]),e._v(" "),t("h2",{attrs:{id:"插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#插件"}},[e._v("#")]),e._v(" 插件")]),e._v(" "),t("ul",[t("li",[e._v("不再内置 "),t("code",[e._v("genshin")]),e._v(" 插件，需要自行前往插件库下载")]),e._v(" "),t("li",[t("RouterLink",{attrs:{to:"/migration/plugin/"}},[e._v("定义插件方式变更，由按需导出 "),t("code",[e._v("init")]),e._v(" 命名函数改为默认导出"),t("strong",[e._v("对象")])])],1),e._v(" "),t("li",[t("RouterLink",{attrs:{to:"/migration/plugin/"}},[e._v("插件配置项 "),t("code",[e._v("fileName")]),e._v(" 重命名为 "),t("code",[e._v("name")])])],1),e._v(" "),t("li",[t("RouterLink",{attrs:{to:"/migration/core/refresh.html"}},[t("code",[e._v("refresh")]),e._v(" 注册方式变更，合并 "),t("code",[e._v("refresh.registerRefreshableFunc")]),e._v(" 与 "),t("code",[e._v("refresh.registerRefreshableFile")]),e._v(" 为 "),t("code",[e._v("refresh.register")])])],1)]),e._v(" "),t("h2",{attrs:{id:"指令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#指令"}},[e._v("#")]),e._v(" 指令")]),e._v(" "),t("ul",[t("li",[t("RouterLink",{attrs:{to:"/migration/directive/"}},[e._v("指令入口函数写法变更，由按需导出 "),t("code",[e._v("main")]),e._v(" 命名函数改为默认导出"),t("strong",[e._v("匿名函数")])])],1),e._v(" "),t("li",[t("RouterLink",{attrs:{to:"/migration/directive/enquire.html"}},[t("code",[e._v("Enquire")]),e._v(" 类型指令重写")])],1)]),e._v(" "),t("h2",{attrs:{id:"其他变化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他变化"}},[e._v("#")]),e._v(" 其他变化")]),e._v(" "),t("ul",[t("li",[t("RouterLink",{attrs:{to:"/guide/quick-start/web-console.html"}},[t("code",[e._v("web-console")]),e._v(" 的前端部分被抽离为一个独立的模块，需要预先执行一些操作来进行开发")])],1),e._v(" "),t("li",[t("code",[e._v("node-fetch")]),e._v(" 第三方包版本变化，如果你有手动定义返回值类型的需求，现在则需要手动从 "),t("code",[e._v("node-fetch")]),e._v(" 中引入 "),t("code",[e._v("Response")]),e._v(" 类型的返回值")]),e._v(" "),t("li",[t("code",[e._v("redis")]),e._v(" 类方法设置了更为严格的类型限制，参考"),t("a",{attrs:{href:""}},[e._v("xxx")])]),e._v(" "),t("li",[e._v("所有路径别名追加 "),t("code",[e._v("\\")]),e._v("，避免语义不明明。即 "),t("code",[e._v("@modules")]),e._v(" 变为 "),t("code",[e._v("@/modules")]),e._v("，"),t("code",[e._v("#genshin")]),e._v(" 变为 "),t("code",[e._v("#/genshin")]),e._v("。")]),e._v(" "),t("li",[t("code",[e._v(".vue")]),e._v(" 前端页面本地静态资源引入路径变更，参考"),t("a",{attrs:{href:""}},[e._v("xxx")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);